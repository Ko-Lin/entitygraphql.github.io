{"componentChunkName":"component---src-templates-docs-js","path":"/field-extensions/04-custom-extensions","result":{"data":{"site":{"siteMetadata":{"title":"Entity GraphQL Docs","docsLocation":"https://github.com/lukemurray/EntityGraphQL/tree/master/docs/content"}},"mdx":{"fields":{"id":"e0d5fbc1-5c42-5342-9f99-377030484e15","title":"Custom Extensions","slug":"/field-extensions/04-custom-extensions"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Custom Extensions\",\n  \"metaTitle\": \"Creating your own field extensions - EntityGraphQL\",\n  \"metaDescription\": \"Creating your own field extensions\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Field extensions let you move common patterns or use cases into an extension method to easily apply the logic across many fields. To implement an extension you implement the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IFieldExtension\"), \" interface and create an extension method. You can have your extension applied via an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Attribute\"), \" in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SchemaBuilder\"), \" by having your attribute extend \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FieldExtensionAttribute\"), \".\"), mdx(\"p\", null, \"Here is an extension method to add a format argument to a field.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"public static class UseFormatExtension\\n{\\n    public static Field UseFormat(this Field field)\\n    {\\n        if (field.Resolve.Type != typeof(string))\\n            throw new ArgumentException($\\\"UseFormat must only be called on a field that returns a string\\\");\\n\\n        // register extension on field\\n        field.AddExtension(new FormatStringExtension());\\n        return field;\\n    }\\n\\n    public class UseFormatAttribute : FieldExtensionAttribute\\n    {\\n        public override void ApplyExtension(Field field)\\n        {\\n            field.UseFormat(DefaultPageSize, MaxPageSize);\\n        }\\n    }\\n}\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FormatStringExtension\"), \" needs to implement \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IFieldExtension\"), \" or extend \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"BaseFieldExtension\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"public class FormatStringExtension : IFieldExtension\\n{\\n    // Configure the field. Do as much as we can here as it is only called once on registered.\\n    public void Configure(ISchemaProvider schema, Field field)\\n    {\\n\\n    }\\n\\n    // This is called on compilation of a query if the query references this field\\n    // Good opportunity to check arguments\\n    // Most often you can update the expression here and return your new one\\n    public Expression GetExpression(Field field, Expression expression, ParameterExpression argExpression, dynamic arguments, Expression context, ParameterReplacer parameterReplacer)\\n    {\\n        if (arguments.last == null && arguments.first == null)\\n            throw new ArgumentException($\\\"Please provide at least the first or last argument\\\");\\n\\n        // build the expression that calls your format logic/method\\n        var call = Expression.Cal(...);\\n        return call;\\n    }\\n\\n    public Expression ProcessScalarExpression(Expression expression, ParameterReplacer parameterReplacer)\\n    {\\n        // Only called for scalar fields (result in data, not a selection)\\n        // called at the final stage just before being used in the final expression for execution\\n        // Often no need to do anything here\\n        return expression;\\n    }\\n\\n    public (Expression baseExpression, Dictionary<string, CompiledField> selectionExpressions, ParameterExpression selectContextParam) ProcessExpressionSelection(GraphQLFieldType fieldType, Expression baseExpression, Dictionary<string, CompiledField> selectionExpressions, ParameterExpression selectContextParam, ParameterReplacer parameterReplacer)\\n    {\\n        // Called for object projection and collection fields. Giving you an opportunity to modify\\n        // the selection expression or the selection base expression.\\n        // ConnectionEdgeNodeExtension provides a good example of this from UseConnectionPaging\\n        return (baseExpression, selectionExpressions, selectContextParam);\\n    }\\n}\\n\")), mdx(\"p\", null, \"See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/EntityGraphQL/EntityGraphQL/blob/master/src/EntityGraphQL/Schema/FieldExtensions/Filter/FilterExtension.cs\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"FilterExtension\")), \" for a simple example. \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/EntityGraphQL/EntityGraphQL/blob/master/src/EntityGraphQL/Schema/FieldExtensions/Sorting/SortExtension.cs\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"SortExtension\")), \" for a sightly more complex one. Or \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/EntityGraphQL/EntityGraphQL/blob/master/src/EntityGraphQL/Schema/FieldExtensions/ConnectionPaging/ConnectionPagingExtension.cs\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"ConnectionPagingExtension.cs\")), \" for an example that changes the shape of the field (from a collection to a Connection object).\"));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{},"parent":{"relativePath":"field-extensions/04-custom-extensions.md"},"frontmatter":{"metaTitle":"Creating your own field extensions - EntityGraphQL","metaDescription":"Creating your own field extensions"}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/authorization","title":"Authorization"}}},{"node":{"fields":{"slug":"/","title":"Entity GraphQL"}}},{"node":{"fields":{"slug":"/entity-framework","title":"Entity Framework"}}},{"node":{"fields":{"slug":"/getting-started","title":"Getting Started"}}},{"node":{"fields":{"slug":"/integration","title":"Integration"}}},{"node":{"fields":{"slug":"/schema-creation/01-mutations","title":"Mutations"}}},{"node":{"fields":{"slug":"/schema-creation","title":"Schema Creation"}}},{"node":{"fields":{"slug":"/schema-creation/02-fields","title":"Field Arguments"}}},{"node":{"fields":{"slug":"/schema-creation/04-directives","title":"Directives"}}},{"node":{"fields":{"slug":"/schema-creation/05-other-data-sources","title":"Other Data Sources"}}},{"node":{"fields":{"slug":"/schema-creation/03-types","title":"Other Types"}}},{"node":{"fields":{"slug":"/field-extensions","title":"Field Extensions"}}},{"node":{"fields":{"slug":"/field-extensions/02-filtering","title":"Filtering"}}},{"node":{"fields":{"slug":"/field-extensions/01-paging","title":"Paging"}}},{"node":{"fields":{"slug":"/field-extensions/03-sorting","title":"Sorting"}}},{"node":{"fields":{"slug":"/introduction","title":"Introduction"}}},{"node":{"fields":{"slug":"/schema-creation/06-naming","title":"Note on Naming"}}},{"node":{"fields":{"slug":"/field-extensions/04-custom-extensions","title":"Custom Extensions"}}}]}},"pageContext":{"id":"e0d5fbc1-5c42-5342-9f99-377030484e15"}},"staticQueryHashes":["2619113677","3706406642","417421954"]}